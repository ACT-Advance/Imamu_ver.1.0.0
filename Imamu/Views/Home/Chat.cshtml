@{ViewBag.Title = "Chat";}

<!--
        <div class="container">
        <input type="text" id="message" />
        <input type="button" id="sendmessage" value="Send" />
        <input type="hidden" id="displayname" />

        <ul id="discussion" data-bind="foreach: { data: words, as: 'word' }">
            <li>
                <label><strong><span data-bind="text: word.name"></span>:</strong><span data-bind="text: word.message"></span></label>
            </li>
        </ul>
    </div>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/knockout/knockout-3.1.0.js"></script>
    <script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/signalr/jquery.signalr-2.0.3.min.js"></script>
    <script src="~/signalr/hubs"></script>
    <script>
        $(function () {
            // knockoutjsで利用するデータモデルを定義
            var viewModel = {
                words: ko.observableArray(),
            };
            // knockoutjsでのデータ監視を開始
            ko.applyBindings(viewModel);
            var chat = $.connection.chatHub;
            chat.client.addNewMessageToPage = function (name, message) {
                // 定義されたデータモデルのデータを変更
                // ※本アプリではデータを追加
                viewModel.words.push({
                    name: name,
                    message: message,
                });
            };
            $('#displayname').val(prompt('Enter your name:', ''));
            $('#message').focus();
            $.connection.hub.start().done(function () {
                $('#sendmessage').click(function () {
                    chat.server.send($('#displayname').val(), $('#message').val());
                    $('#message').val('').focus();
                });
            });
        });
    </script>
-->
@using (Ajax.BeginForm("ChatSendMsg", "Home",
    new AjaxOptions {
        HttpMethod = "POST",
        InsertionMode = InsertionMode.InsertAfter,
        UpdateTargetId = "message"
        }))
{
    <div class="form-group">
        <label for="inputMessage" class="col-xs-1 control-label"></label>
        <div class="col-xs-10">
            <input class="form-control" id="Chat" name="message" type="textarea" value="" />
        </div>
    </div>

    <div class="form-group">
        <div class="col-xs-10">
        </div>
        <div class="col-xs-2">
            <input class="btn btn-primary" type="submit" style="margin-top:8px" value="送信" />
        </div>
    </div>
}

<div class="container">
<div class="panel panel-default">
        <div class="col-xs-1 col-md-1"></div>
	<div class="panel-body" id="message">
    </div>
</div>

</div>
